"use strict";class CardSort{constructor({obj:t,wrap:e,qty:i}){this.obj=t,this.wrap=document.querySelector(e),this.toShow=i-1}init(){this.cardToShow(),this.elemForSort()}cardToShow(){for(let t=0;t<=this.toShow;t++){let t=document.createElement("div");t.classList.add("card"),t.innerHTML='\n            <div class="card__img"><img src="" alt="cat"></div>\n            <div class="card__content">\n            <h2 class="card__title">Кот полосатый</h2>\n            <div class="card__info">\n                <p class="card__subTitle">Коричневый окрас</p>\n                <p class="card__age"><span class="card__num">2</span><br>Возраст</p>\n                <p class="card__qty"><span class="card__num">4</span><br>Кол-во лап</p>\n            </div>\n                <div class="card__price">\n                    <span></span>\n                </div>\n            </div>\n                <input class="input input_main button button_blue button_card" type="button" value="Купить"></input>\n            ',this.wrap.appendChild(t)}this.addText()}addText(){const t=document.querySelectorAll(".card");for(let e=0;e<t.length;e++){const i=t[e].querySelector("img"),n=t[e].querySelector(".card__age > .card__num"),r=t[e].querySelector(".card__price");let{foto:o,age:a,price:c,discount:s,sold:d,like:l}=this.obj[e];i.src=o,n.textContent=a+" мес.",r.textContent=this.numberWithSpaces(c)+" руб.",this.addHeart(t[e],l),s&&this.addDiscount(s,t[e]),d&&this.addSoldItem(t[e])}this.notify()}addHeart(t,e){t.innerHTML+=e?'\n            <div class="heart heart_main">\n                <div class="heart__wrap"><img src="./img/main/Vector_white.png" alt="heart"></div>\n            </div>\n            ':'\n            <div class="heart heart_main">\n                <div class="heart__wrap"><img src="./img/main/Vector.png" alt="heart"></div>\n            </div>\n            '}notify(){document.querySelectorAll(".heart").forEach((t,e)=>{t.addEventListener("click",t=>{this.obj[e].like?(t.target.src="./img/main/Vector.png",this.obj[e].like=!1):(this.obj[e].like=!0,t.target.src="./img/main/Vector_white.png")})})}addSoldItem(t){let e=t.querySelector(".button");e.classList.add("button_black"),e.value="Продан"}addDiscount(t,e){e.innerHTML+=`<div class="discount discount_card">${t}</div>`}delDiscountAndSold(){const t=document.querySelectorAll(".button_black"),e=document.querySelectorAll(".discount");t.forEach(t=>{t.classList.remove("button_black")}),e.forEach(t=>{t.remove()})}delHeart(){document.querySelectorAll(".heart").forEach(t=>{t.remove()})}elemForSort(){document.querySelectorAll(".dropmenu").forEach(t=>{t.addEventListener("click",e=>{t.matches('[data-item="price"]')?this.sortingPriceMaxToLow():t.matches('[data-item="age"]')&&this.sortingAgeLowToMax()})})}sortingPriceMaxToLow(){this.obj.sort((function(t,e){return e.price-t.price})),this.delDiscountAndSold(),this.delHeart(),this.addText()}sortingAgeLowToMax(){this.obj.sort((function(t,e){return t.age-e.age})),this.delDiscountAndSold(),this.delHeart(),this.addText()}numberWithSpaces(t){return t.toString().replace(/\B(?=(\d{3})+(?!\d))/g," ")}}const scrollUp=document.querySelector(".scrollup");window.addEventListener("scroll",()=>{pageYOffset>450?scrollUp.style.display="block":scrollUp.style.display="none"}),scrollUp.addEventListener("click",()=>{window.scrollTo(pageYOffset,0)});const button=document.querySelector(".burger-menu__btn"),menuBurger=document.querySelector("#burger");button.addEventListener("click",(function(){menuBurger.classList.toggle("burger-menu__box")}));const obj=[{title:"Кот полосатый",foto:"./img/main/cat1.png",price:3e4,age:3,paws:4,discount:"-41%",sold:!1,like:!1},{title:"Кот полосатый",foto:"./img/main/cat2.png",price:4e4,age:4,paws:4,discount:!1,sold:!0,like:!1},{title:"Кот полосатый",foto:"./img/main/cat3.png",price:2e4,age:2,paws:4,discount:!1,sold:!1,like:!1},{title:"Кот полосатый",foto:"./img/main/cat1.png",price:25e3,age:2,paws:4,discount:!1,sold:!1,like:!1},{title:"Кот полосатый",foto:"./img/main/cat2.png",price:3e4,age:2,paws:4,discount:"-41%",sold:!1,like:!1},{title:"Кот полосатый",foto:"./img/main/cat3.png",price:1e4,age:1,paws:4,discount:!1,sold:!0,like:!1}],card=new CardSort({obj:obj,wrap:".main__center",qty:6});card.init();